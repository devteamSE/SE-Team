<head>
<link rel="stylesheet" type="text/css" href="../../media/css/project.css">
</head>

{% extends "base.html" %}
{% load i18n %}

{% block title %} Wines | Arkansas Wineries {% endblock %}

{% block extrahead %}
    <script type="text/javascript">
        $('input:submit').click(function(){
            $(this).attr("disabled", "disabled").parent('form').submit();
        });
    </script>
    <script type="text/javascript">
        function save_star_rating(wId,uId,rating){
            $.post('ajax/rate_wine',{wId: wId, uId: uId, wine_rating: rating}
                ,function(data){
	                {# do stuff #}

                }
            );
        }

    </script>
{% endblock %}


{% block BodySection %}
    <body>
        <div class ="WineTable">
            <table>
                <tr>
                    <td>Name</td>
                    <td>Type</td>
                    <td>Style</td>
                    <td>Rank</td>
                    <td>Winery</td>
                    {% if user %}
                    <td>Star Rating</td>
                    {% endif %}
                    <td>Short Description</td>
                </tr>
                {% for wine in Wines %}
                    <tr>
                        <td> <a href ="#">{{ wine.name }}</a></td>
                        <td>{{ wine.wineType }}</td>
                        <td>{{ wine.wineStyle }}</td>
                        <td>{{ wine.rank }}</td>
                        <td>{{ wine.winery }}</td>
                        {% if user %}<td><span class="rating" id="#{{ wine.id }}"><input type="radio" class="rating-input" id="rating-input-1-5" name="rating-input-1" onclick="save_star_rating({{wine.id}},{{user.id}},5);"/><label for="rating-input-1-5" class="rating-star"></label><input type="radio" class="rating-input" id="rating-input-1-4" name="rating-input-1" onclick="save_star_rating({{ wine.id }},{{ user.id }},4);"/><label for="rating-input-1-4" class="rating-star"></label><input type="radio" class="rating-input" id="rating-input-1-3" name="rating-input-1" onclick="save_star_rating({{ wine.id }},{{ user.id }},3);"/><label for="rating-input-1-3" class="rating-star"></label><input type="radio" class="rating-input" id="rating-input-1-2" name="rating-input-1" onclick="save_star_rating({{ wine.id }},{{ user.id }},2);"/><label for="rating-input-1-2" class="rating-star"></label><input type="radio" class="rating-input" id="rating-input-1-1" name="rating-input-1" onclick="save_star_rating({{ wine.id }},{{ user.id }},1);"/><label for="rating-input-1-1" class="rating-star"></label></span></td>{% endif %}
                        <td>{{ wine.shortDesc }}</td>
                    </tr>
                {% endfor %}
        </table>
    </div>
    </body>
{% endblock %}
